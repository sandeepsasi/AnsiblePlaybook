 - name: Install SPARK
   hosts: all
   become: true

   tasks:
     - name: Creating directory
       file:
            path: /opt/scala
            path: /opt/spark
            mode: 0775
            state: directory

     - name: Install scala
       get_url:
               url: http://downloads.lightbend.com/scala/2.12.1/scala-2.12.1.deb
               dest: /opt/scala/

     - name: Installing scala, if not installed
       apt:
           deb: /opt/scala/scala-2.12.1.deb
           state: present




     - name: Install spark
       get_url:
               url: http://d3kbcqa49mib13.cloudfront.net/spark-2.0.2-bin-hadoop2.7.tgz
               dest: /usr/local/src/
               mode: 0755

     - name: extract
       unarchive:
                src: /usr/local/src/spark-2.0.2-bin-hadoop2.7.tgz
                dest: /opt/spark
                owner: root
                group: root
                copy: no


     - name: Installing spark
       shell: /opt/spark/spark-2.0.2-bin-hadoop2.7/bin/spark-shell --master local[2]

